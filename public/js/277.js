(self.webpackChunk=self.webpackChunk||[]).push([[277],{4277:(s,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var e=t(7757),r=t.n(e);function o(s,a,t,e,r,o,l){try{var i=s[o](l),n=i.value}catch(s){return void t(s)}i.done?a(n):Promise.resolve(n).then(e,r)}const l={name:"Profile",data:function(){return{loading:!1,actual_password:{value:"",type:"",message:""},password:{value:"",type:"",message:""},password_confirmation:{value:""}}},computed:{user:function(){return this.$store.state.user},submitDisabled:function(){return!this.password.value||!this.password_confirmation.value}},filters:{dniFormat:function(s){return Number(s).toLocaleString("es")}},methods:{cleanErrors:function(){this.password.type="",this.password.message="",this.actual_password.type="",this.actual_password.message=""},showErrors:function(s){s.actual_password&&(this.actual_password.type="is-danger",this.actual_password.message=s.actual_password),s.password&&(this.password.type="is-danger",this.password.message=s.password)},submit:function(){var s,a=this;return(s=r().mark((function s(){return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a.loading=!0,a.cleanErrors(),s.next=4,axios.post("/api/change-password",{actual_password:a.actual_password.value,password:a.password.value,password_confirmation:a.password_confirmation.value}).then((function(s){a.actual_password.value="",a.password.value="",a.password_confirmation.value="",a.$buefy.toast.open({message:s.data.message,type:"is-success"})})).catch((function(s){var t=s.response;422==t.status&&a.showErrors(t.data.errors)}));case 4:a.loading=!1;case 5:case"end":return s.stop()}}),s)})),function(){var a=this,t=arguments;return new Promise((function(e,r){var l=s.apply(a,t);function i(s){o(l,e,r,i,n,"next",s)}function n(s){o(l,e,r,i,n,"throw",s)}i(void 0)}))})()}}};const i=(0,t(1900).Z)(l,(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("main",{staticClass:"section pt-4 pt-6-tablet"},[t("div",{staticClass:"container"},[t("div",{staticClass:"box is-medium"},[t("div",{staticClass:"box-inner"},[t("h2",{staticClass:"title is-4"},[s._v("Mi Perfil")]),s._v(" "),t("hr"),s._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-half"},[t("h3",{staticClass:"subtitle"},[s._v("Datos de la cuenta")]),s._v(" "),t("b-field",{attrs:{label:"Email"}},[t("b-input",{attrs:{value:s.user.email,disabled:""}})],1),s._v(" "),t("b-field",{attrs:{label:"Nombre y Apellido"}},[t("b-input",{attrs:{value:s.user.name+" "+s.user.last_name,disabled:""}})],1),s._v(" "),t("b-field",{attrs:{label:"Documento"}},[t("b-input",{attrs:{value:s._f("dniFormat")(s.user.dni),disabled:""}})],1)],1)]),s._v(" "),t("hr"),s._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6-tablet"},[t("h3",{staticClass:"subtitle"},[s._v("Frente del documento")]),s._v(" "),t("div",{staticClass:"upload"},[t("div",{staticClass:"upload-draggable",staticStyle:{cursor:"not-allowed"}},[t("img",{staticClass:"upload-preview",attrs:{src:s.user.photos[0].filename,alt:"Frente del documento"}})])])]),s._v(" "),t("div",{staticClass:"column is-6-tablet"},[t("h3",{staticClass:"subtitle"},[s._v("Dorso del documento")]),s._v(" "),t("div",{staticClass:"upload"},[t("div",{staticClass:"upload-draggable",staticStyle:{cursor:"not-allowed"}},[t("img",{staticClass:"upload-preview",attrs:{src:s.user.photos[1].filename,alt:"Dorso del documento"}})])])])]),s._v(" "),t("hr"),s._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-half"},[t("h2",{staticClass:"subtitle"},[s._v("Cambiar Contraseña")]),s._v(" "),t("form",{on:{submit:function(a){return a.preventDefault(),s.submit(a)}}},[t("b-field",{attrs:{label:"Actual",type:s.actual_password.type,message:s.actual_password.message}},[t("b-input",{attrs:{type:"password","password-reveal":""},model:{value:s.actual_password.value,callback:function(a){s.$set(s.actual_password,"value",a)},expression:"actual_password.value"}})],1),s._v(" "),t("b-field",{staticClass:"mb-5",attrs:{label:"Nueva",type:s.password.type,message:s.password.message}},[t("b-input",{attrs:{type:"password","password-reveal":""},model:{value:s.password.value,callback:function(a){s.$set(s.password,"value",a)},expression:"password.value"}})],1),s._v(" "),t("b-field",{staticClass:"mb-5",attrs:{label:"Confirmar Nueva",type:s.password.type}},[t("b-input",{attrs:{type:"password","password-reveal":""},model:{value:s.password_confirmation.value,callback:function(a){s.$set(s.password_confirmation,"value",a)},expression:"password_confirmation.value"}})],1),s._v(" "),t("button",{staticClass:"button is-primary is-fullwidth",class:{"is-loading":s.loading},attrs:{disabled:s.submitDisabled,type:"submit"}},[s._v("\n                Cambiar Contraseña\n              ")])],1)])])])])])])}),[],!1,null,null,null).exports}}]);